# Програмна система languageRecognizer | Вступ

**Програмна система languageRecognizer – "Програмна система автоматизованої ідентифікації української та російської мови усного мовлення"**, яка написана мовою програмування `Python`, призначена для ідентифікації української та російської мови усного мовлення, що подається на вхід системи у вигляді відео- або аудіофайлів, зокрема з видеосервісів мережі Інтернет, таких як Youtube.


### Зміст
- [Позначення та найменування програмного модуля](#name)
- [Програмне забезпечення, необхідне для функціонування програмного модуля](#software)
- [Функціональне призначення](#function)
- [Опис логічної структури](#structure)
- [Використовувані технічні засоби](#hardware)
- [Виклик та завантаження](#run)

<a name="name"></a>
<h2>Позначення та найменування програмної системи</h2>

Програмна система має позначення **"languageRecognizer"**.

Повне найменування програмної системи – **"Програмна система автоматизованої ідентифікації української та російської мови усного мовлення"**.

<a name="software"></a>
<h2>Програмне забезпечення, необхідне для функціонування програмної системи</h2>

Для функціонування програмної системи, написаної мовою програмування `Python`, необхідне наступне програмне забезпечення, пакети та моделі:

- `Docker` [v20.10](https://docs.docker.com/engine/release-notes/#version-2010)
- `Kubernetes` [v1.22.4](https://github.com/kubernetes/kubernetes/releases/tag/v1.22.4)
- `python 3.8.0` or newer [v3.8.0](https://www.python.org/downloads/release/python-380/)
- `MoviePy` [v2.0.0](https://pypi.org/project/moviepy/2.0.0.dev2/)
- `vosk` [v0.3.32](https://pypi.org/project/vosk/0.3.32/)
- `wave` [v0.0.2](https://pypi.org/project/Wave/0.0.2/)
- `scipy` [v1.8.0](https://pypi.org/project/scipy/1.8.0/)
- `csv` [latest version](https://docs.python.org/3/library/csv.html)
- `codecs` [latest version](https://docs.python.org/3/library/codecs.html)
- `re` [v2.2.1](https://docs.python.org/3/library/re.html)

- `vosk-model-uk-v3` [v3](https://alphacephei.com/vosk/models/vosk-model-uk-v3.zip)
- `vosk-model-small-ru-0.22` [0.22](https://alphacephei.com/vosk/models/vosk-model-small-ru-0.22.zip)

<a name="function"></a>
<h2>Функціональне призначення</h2>

Програмна система **"languageRecognizer"** для ідентифікації української та російської мови усного мовлення, що подається на вхід системи у вигляді відео- або аудіофайлів, зокрема з видеосервісів мережі Інтернет, таких як Youtube.

<a name="structure"></a>
<h2>Опис логічної структури</h2>

Програмний модуль складається з частин (Рис. 1):
- Отримання на вхід аудіо- або відеофайлу для розпізнавання
- Конвертування вхідного відеопотоку (у випадку отримання відеофайлу) в аудіо (отримання звукової доріжки)
- Перетворення мовлення у текст (формування стенограми)
- Ідентифікація мови мовлення, представленого в аудіофайлі, за допомогою класифікатора мови
- Повернення мітки конкретної мови (наприклад, «українська», «російська» або «невизначена мова»)

<p align="center">
  <img src="https://github.com/OlehDmytrenko/language-recognizer/blob/main/Flowchart.jpg">
</p>

Рис. 1 - Блок-схема програмної системи автоматизованої ідентифікації мови

<a name="hardware"></a>
<h2>Використовувані технічні засоби</h2>

Програмна система експлуатується на сервері (або у хмарі серверів) під управлінням операційної системи типу `Linux` (64-х разрядна). В основі управління всіх сервісів є система оркестрації `Kubernetes`, де всі контейнери працюють з використанням `Docker`.


<a name="run"></a>
<h2>Виклик та завантаження</h2>

Щоб розпізнати мову з відео необхідно на підготовчому етапі помістити відповідні відеофайли `.avi` у дирикторію `/videos`.

Для серверів, які працюють під керівництвом операційних систем сімейства `Windows OS`, виклик програмної системи **"languageRecognizer"** здійснюється шляхом запуску скрипта `ім'я скрипта.py` з використанням команди `python`. Потрібно відкрити командний рядок – термінал `cmd` та написати `python ім'я скрипта.py`. Важливо, щоб скрипт знаходився або в директорії, з якої запущено командний рядок, або в каталозі, прописаному у змінній середовища `PATH`. 
Тож завантаження програмної системи забезпечується введенням в командному рядку повного імені завантажувальної програми без додаткових параметрів:
```cmd
python languageRecognizer.py
```

Для серверів, які працюють під керівництвом `Unix`-подібних операційних систем (наприклад, `Linux`) також можна скористатися цим способом, але на початку скрипта `Python` у першому рядку має бути вказаний повний шлях до інтерпретатора:
``` cmd
#!/usr/bin/python3
```
або
``` cmd
#!/usr/bin/env python3
```
Після цього необхідно дозволити запуск файлу (зробити його виконуваним).
``` cmd
chmod u+x languageRecognizer.py
```
Тепер просто запустити скрипт, ввівши в термінал його ім'я, перед яким додати «./»:
``` cmd
./languageRecognizer.py
```

В результаті запуску скрипта `languageRecognizer.py` здійснюється попередня конвертація вхідних відеофайлів формату `.avi` у аудіо формату `.wav`. Вихідні аудіофайли буде автоматично збережено у дирикторії `/audios` та додано до черги для ідентифікації представленої у них мови мовлення.
Далі програмна система по черзі вибиратиме файли для ідентифікації мови із дирикторії `/audios` та виводитиме результат у консоль.

Дані, отримані в результаті застосування програмної системи, виводяться в консолі `cmd`. Також вивід може перенаправлятися із консолі у файл, який зберігаюється у дирикторії `results` у вигляді `.txt` файла. Для цього використовується оператор `>`.
Повна команда виглядає так:
```cmd
python languageRecognizer.py > output.txt
```
Тут `output.txt` – це текстовий файл, у який записується результат виконання скрипта.

Операція може використовуватися як в операційній системі `Windows OS`, так і в `Unix`-подібних системах.
Якщо файла, в який повинен вивестися результат, не існує – система створить його автоматично.
При використанні оператора `>` вміст файлу, в який відображаються дані, повністю перезаписується. Якщо наявні дані потрібно зберегти, а нові дописати до існуючих, то використовується оператор `>>`:
```cmd
python languageRecognizer.py >> output.txt
```

© 2022 [Oleh Dmytrenko](https://github.com/OlehDmytrenko)